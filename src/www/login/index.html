<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Note Messenger</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/png" href="/images/NotoV1Memo_64x64.png" />
    <script
      defer
      src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <script>
      function login(password) {
        fetch("/api/login", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ password }),
          redirect: "follow",
        })
          .then(async (response) => {
            if (response.ok) {
              window.location.replace("/");
            } else {
              console.log(await response.json());
            }
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      }
    </script>
  </head>
  <body>
    <div x-data="{password: ''}">
      <label>
        Password
        <input
          type="password"
          placeholder="Enter your password"
          x-model:value="password"
          @keydown="if ($event.key === 'Enter') login(password)"
        />
      </label>
      <button @click="login(password)">Log In</button>
    </div>
  </body>
</html>
